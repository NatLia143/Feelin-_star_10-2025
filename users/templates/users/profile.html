{% extends 'logged_base.html' %}

{% load static %}

{% block content %}

 <div class="profile-header" {% if header_image_url %}style="background-image: url('{{ header_image_url }}');"{% endif %}>
    {# Si no hay imagen, mostramos el texto del header dentro del contenedor #}
    {% if not header_image_url %}
      <h1>{{ profile.header|default:"" }}</h1>
    {% endif %}
  </div>

  <div class="container mt-5">
    <div class="avatar-wrapper">
      <img class="avatar" src="{{ avatar_url }}" alt="Avatar">
      {% if is_owner %}
        <div class="mt-3">
          <a class="btn btn-outline-primary btn-sm" href="{% url 'users:profile_edit' %}">Editar perfil</a>
        </div>
      {% endif %}
    </div>

    <div class="row mt-4">
      <div class="col-md-6 mb-4">
        <div class="section-card">
          <h5 class="mb-3">Descripción</h5>
          <p class="mb-0">{{ profile.bio|default:"Sin descripción aún." }}</p>
        </div>
      </div>
      <div class="col-md-6 mb-4">
        <div class="section-card">
          <h5 class="mb-3">Instrumentos</h5>
          {% if profile.instruments.all %}
            <ul class="mb-0">
              {% for inst in profile.instruments.all %}
                <li>{{ inst.name }}</li>
              {% empty %}
                <li>Sin instrumentos seleccionados.</li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="mb-0">Sin instrumentos seleccionados.</p>
          {% endif %}
        </div>
      </div>
    </div>

    {% if spotify_embed_src %}
      <div class="section-card mb-5">
        <h5 class="mb-3">Playlist de Spotify</h5>
        <iframe style="border-radius:12px"
                src="{{ spotify_embed_src }}"
                width="100%" height="380" frameborder="0"
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                loading="lazy"></iframe>
      </div>
    {% endif %}
  </div>

{% endblock %}